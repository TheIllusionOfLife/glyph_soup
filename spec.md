# Glyph Soup — 実装仕様書

> **Document Role:** Implementation Specification (authoritative)
> **Based on:**
> - [`docs/research/research_plan.md`](docs/research/research_plan.md) — 初期研究計画（構想・RQ・実験シナリオの原案）
> - [`docs/reviews/review_unified.md`](docs/reviews/review_unified.md) — 統一レビュー（計画の問題点と推奨アクション）
> - [`docs/reference/assembly_theory_report_ja.md`](docs/reference/assembly_theory_report_ja.md) — アセンブリ理論の参照資料
> - 研究者インタビュー — パラメータ選択・スコープ・設計判断の確定
>
> **This is the document to follow for implementation.** The research plan and review are retained for context and audit trail.

### Decision Status Legend

本仕様書の各項目は以下のいずれかの状態にある：

| マーク | 意味 |
|-------|------|
| (なし) | **確定済み** — そのまま実装してよい |
| **[EXPLORE]** | **探索項目** — 複数の選択肢を実装し、予備実験またはベンチマークで決定する |
| **[DEFERRED]** | **後決め項目** — 該当フェーズ開始時に決定する。実装をブロックしない |

---

## 1. システム概要

### 1.1 研究の位置づけ

本研究は、アセンブリ理論（AT）の定量的予測（$A_{total}$ の閾値、$A \times N$ シグネチャ）を**人工化学系において初めて体系的に検証する試み**である。二分木化学は実分子化学の忠実な再現ではなく、ATが主張する「選択と複製による組織化された複雑さの創発」が、基質非依存的に成立するかを検証するための**情報的類似モデル（informative analogy）**として設計されている。

したがって、本研究の結論は「二分木人工化学の条件Xにおいて、ATの予測Yと整合/非整合する結果を観測した」という形式で報告し、ATそのものの妥当性を主張または否定するものではない。先行する人工化学研究（Fontana's AlChemy, Kauffman's autocatalytic sets, Dittrich et al.）との差別化ポイントは、ATの3層指標体系（個別・系全体・分布形状）を初めてシミュレーション実験系に導入し、ランダムな複雑さと組織化された複雑さを操作的に区別する点にある。

### 1.2 システム構成

| 項目 | 決定事項 |
|------|---------|
| リポジトリ構成 | モノレポ（`glyph_soup/`に全コード） |
| 言語 | Python先行 → ボトルネック判明後にRustで最適化 |
| 実装基盤 | Rust/C拡張も視野に入れるが、まずPure Pythonで動作確認 |
| 出力形式 | CSV出力 + Jupyter Notebookで分析・可視化 |
| ゲームエンジン連携 | **[DEFERRED]** Python完成後に最適なエンジン（Unity/Unreal/Godot等）を選定 |
| スコープ | 全実験（A・B・C）+ ゲームエンジンによる視覚化 |

---

## 2. データ構造

### 2.1 分子の内部表現：二分木

分子は二分木（Binary Tree）で表現する。文字列表現は表示・ハッシュ比較用。

```
分子 ((A,B),(C,D)) の木表現:

       *
      / \
     *   *
    / \ / \
   A  B C  D
```

### 2.2 結合の対称性 **[EXPLORE]**

- **(A,(B,C))** と **((B,C),A)** を同一とみなすか否かは実験パラメータとして扱う
- 両条件（対称/非対称）を実装し、ダイナミクスの差異を比較する
- 対称モードでは正規形（canonical form）への変換が必要

---

## 3. シミュレーションパラメータ

| パラメータ | 値 | 備考 |
|-----------|-----|------|
| アルファベットサイズ | 4種（A, B, C, D） | 固定 |
| タンク初期原子数 | ~1,000 | 初期投入量。実験A・BはOpen System（上限なし） |
| タンク原子数上限 | なし（Open System） | 実験C-1で総原子数保存制約（$M_{total} = 1{,}000$）を導入する |
| 1ランのステップ数 | 100,000 | 固定 |
| seed数（各実験条件） | 100回 | 固定（0-99） |

---

## 4. 指標体系（3層設計）

レビューで指摘されたC1（指標の乖離）を解決するため、3層の指標を定義する。

### 4.1 個別指標（分子種レベル）

$$S_i = A_i \times N_i$$

各分子種$i$のアセンブリ指数$A_i$とコピー数$N_i$の積。ヒートマップ（MA-CN散布図）のプロット用。

### 4.2 系全体指標

$$A_{total} = \sum_{i} (A_i \times N_i)$$

系全体のアセンブリ状態を定量化。相転移検出の主要指標。

### 4.3 分布形状指標

MA-CN散布図のクラスタ形成パターンを分析し、以下を区別する：
- **ランダムな複雑さ**: 高$A$・低$N$（偶然の産物）
- **組織化された複雑さ**: 中〜高$A$・極めて高$N$（選択と複製の結果）

---

## 5. MA計算アルゴリズム

### 5.1 方針

**近似解（貪欲法＋キャッシュ）** を採用する。

- 貪欲法で最大の再利用可能サブ構造を優先的にマッチする
- 計算済みMAをキャッシュし、同一構造の再計算を回避
- 厳密解との乖離率は初期ベンチマーク時に確認する

### 5.2 ベンチマーク要件

プロジェクト最初期にプロトタイプ実装し、以下を計測する：
- 分子長（ノード数） vs 計算時間
- 近似解 vs 厳密解（小規模サンプル）の乖離率
- タンク全分子のMA一括計算のスループット

### 5.3 近似精度の検証基準

貪欲法はアセンブリ理論の「最短パス（最小ステップ）」要件を保証しない。以下の基準で近似の許容性を判定する：

- **検証手順**: 葉ノード数 ≤ 12 の全分子について、厳密解（動的計画法による全探索）と近似解を比較する
- **許容基準**: 乖離率（$(MA_{greedy} - MA_{exact}) / MA_{exact}$）の平均が 10% 以下、最大が 30% 以下
- **順位保存性**: 貪欲解と厳密解のSpearman順位相関 $\rho$ ≥ 0.95 を必須とする。Wilcoxon検定は値の順位に依存するため、絶対値の乖離よりも順位保存が統計的結論の妥当性に直結する
- **トポロジー別誤差**: 検証対象分子を構造類型（平衡木・深い鎖状・混合型）に分類し、各類型での乖離率を個別に報告する。特定の構造類型でのみ乖離が大きい場合、その構造を多く生成する実験条件（例: 触媒が特定のトポロジーを選好する場合）の結果解釈に注意を要する
- **不合格時の対処**: 貪欲法のヒューリスティックを改良するか、葉ノード数閾値以下は厳密解にフォールバックするハイブリッド方式に切り替える
- **記録**: 乖離率の分布（全体・トポロジー別）および順位相関を実験結果と共に報告し、近似による結論への影響を議論する

### 5.4 MAの理論的上限の事前評価（Phase 1 Go/No-Go ゲート）

本シミュレーション系（4文字アルファベット・二分木）におけるMAの理論的上限が、実験B・Cで有意な差を示すのに十分な「余裕」を持つかを、Phase 1で事前に確認する。

- **手順**: 葉ノード数 ≤ 16 の全可能な二分木構造について、厳密MA（動的計画法）を網羅的に計算する
- **評価基準**: 葉ノード数16における厳密MAの99パーセンタイルが**実験Aのランダム条件で到達しうるMAの推定上限の2倍以上**であること
- **不合格時の対処**: アルファベットサイズを8種以上に拡大し、再評価する。この判定はPhase 1完了前に行い、全実験のパラメータ決定に先立つ
- **根拠**: MAの上限が低すぎる場合、ランダム条件（実験A）と触媒条件（実験B）のMA分布が重なり、統計的検出力が確保できない。事前に系の表現力を確認することで、全実験が無駄になるリスクを排除する

### 5.5 $A_{total}$ のインクリメンタル計算（必須アーキテクチャ）

Observerは毎ステップ $A_{total}$ を更新する必要があるが、タンク全体を走査する方式（$O(N_{molecules})$）はステップ数 × seed数のスケールで計算コストが支配的になる。以下のインクリメンタル方式を**必須**とする：

- **実行時アキュムレータ**: $A_{total}$ を累積変数として保持する
- **結合時**: 新分子 $Z = \text{Join}(X, Y)$ のMAを計算し、$A_{total} \mathrel{+}= MA_Z - MA_X - MA_Y$ （$X, Y$ はタンクから除去されるため減算）
- **分解時**: 分子 $Z$ が $X, Y$ に分解される場合、$A_{total} \mathrel{+}= MA_X + MA_Y - MA_Z$
- **整合性検証**: 開発中は定期的（例: 1000ステップごと）にタンク全走査による再計算と照合し、浮動小数点誤差やバグを検出する。本番実行では検証頻度を下げるかオフにする

---

## 6. 反応ルール

### 6.1 Bonding（結合）

```
X + Y → Join(X, Y)    確率: P_bond
```

- 結合位置：二分木のルートに新ノードを作り、X・Yを左右の子とする
- `P_bond` は定数、値域 $[0, 1]$ **[EXPLORE]**
- **初期値**: 0.5（Phase 3のベンチマーク後、平衡到達時間を見て調整）
- **探索範囲**: {0.1, 0.3, 0.5, 0.7, 0.9} のグリッドサーチ（実験A予備実験で決定）

### 6.2 Breaking（分解）

```
Join(X, Y) → X + Y    確率: P_break(molecule)
```

- 切断位置：二分木の内部ノードを一様ランダムに選択し、そこで切断
- 分解確率関数 `P_break` は**実験パラメータ [EXPLORE]** として以下を比較する：
  - **線形**: $P_{break}(n) = \min(1,\; \beta \cdot n)$
  - **指数**: $P_{break}(n) = \min(1,\; \beta \cdot \exp(\alpha \cdot n))$
  - **ノード数比例**: $P_{break}(m) = \min(1,\; \beta \cdot m)$ （$m$ = 内部ノード数）
- すべて $\min(1, \cdot)$ で $[0, 1]$ にクランプする
- $\alpha, \beta$ は調整パラメータ。初期値は予備実験で平衡到達を確認して設定する

### 6.3 Catalysis（触媒）[Phase 2: 実験B以降]

```
X + Y + C → Join(X, Y) + C    確率: P_bond × boost(C, X, Y)
```

#### 反応の実行手順

1. タンクから2分子 (X, Y) を一様ランダムにサンプリングする（非復元抽出）
2. タンク内の**残りの**分子から触媒候補 C を1つ一様ランダムにサンプリングする
3. C が (X, Y) の結合を触媒するかマッチング判定する
4. マッチした場合、結合確率を `P_bond × boost` に引き上げる
5. C はタンクに戻す（触媒は消費されない）
- **同一分子の多重使用**: 不可（X, Y, C はすべて異なる個体）
- **濃度依存**: ステップ2でタンクからランダム抽出するため、コピー数が多い分子ほど触媒として選ばれやすい（暗黙的な濃度依存）

#### 方式1: 構造決定論的

- **文字列部分一致**: 触媒のフラット表現が基質のフラット表現に含まれるか
- **木構造部分一致**: 触媒の部分木が基質の部分木と同型か
- 両方実装し、「触媒記述の解像度」がダイナミクスに与える影響を比較

#### 方式2: ランダムテーブル

- seedごとにランダムな触媒マップを生成
- 設計者バイアスを排除し、創発の主張を堅固にする

---

## 7. 閾値の再校正（C2対処）

参照理論の $A > 15$ は実分子測定の経験的境界であり、文字列人工化学にそのまま移植しない。

### 校正手順

1. 実験A（ランダム条件）を100 seedで実行
2. 各seedにおける$A_{total}$と最大MAの分布を取得
3. 分布の99パーセンタイルを「ランダム上限」とする
4. この上限を超える状態を「非ランダム領域」と定義
5. 以降の実験B・Cの判定基準として使用

---

## 8. アセンブリ転移の操作的定義

**$A_{total}$ の時系列における急激かつ持続的な勾配変化**をもって「転移」と判定する。

### 8.1 検出アルゴリズム

1. $A_{total}$ の時系列に対し、窓幅 $W$ の移動平均でノイズを平滑化する
2. 平滑化済み時系列の二階差分（加速度）$a(t)$ を計算する
3. $a(t)$ が閾値 $\theta$ を**連続 $k$ ステップ**超えた場合に「転移開始」と判定する

### 8.2 パラメータ

| パラメータ | 初期値 | 校正方法 |
|-----------|-------|---------|
| 窓幅 $W$ | 1,000ステップ | 予備実験で平滑化後のSN比を確認して調整 |
| 持続条件 $k$ | 500ステップ | 実験Aのランダム条件で偽陽性率 < 1% になる値を選定 |
| 閾値 $\theta$ | — | 実験Aのランダム条件での $a(t)$ 分布の99パーセンタイルに設定 |

### 8.3 設計根拠

- 連続$k$ステップ超過の持続条件により、単発スパイクの誤検出を排除する
- $W$, $k$, $\theta$ のすべてを実験Aのベースライン分布から校正するため、恣意性を最小化する

### 8.4 補助的転移検出（緩やかな変化への対応）

§8.1 の二階差分法は**急激な転移**の検出に特化しており、$A_{total}$ が緩やかに持続的に上昇するケース（例: B-1の拡散的触媒による漸進的複雑化）を見逃す構造的盲点がある。これを補うため、以下を副次的検出手法として併用する：

- **変化点検出**: $A_{total}$ 時系列に対しPELT（Pruned Exact Linear Time）アルゴリズムを適用し、平均レベルの構造的変化点を検出する。Pythonの `ruptures` ライブラリを使用
- **トレンド検定**: 安定期（50K-100K）の $A_{total}$ にMann-Kendall検定を適用し、単調増加トレンドの有無を判定する
- **主従関係**: §8.1 の二階差分法を**主検出器**、本節の手法を**副検出器**とする。主検出器で「転移なし」と判定されたseedについて副検出器の結果を報告し、転移の有無の総合判断に用いる
- **乖離時の扱い**: 主検出器と副検出器の判定が異なるseedが全体の10%を超える場合、その原因を分析し、転移の性質（急激 vs 漸進）について議論する

---

## 9. 統計計画

### 9.1 要約値の定義

各seedの $A_{total}$ 時系列（100Kステップ）から以下の3値を抽出する：

| 要約値 | 定義 | 役割 |
|--------|------|------|
| 安定期平均 $\bar{A}_{stable}$ | 後半50%ステップ（50K-100K）の $A_{total}$ 平均 | **主指標**: 条件間比較の基準値 |
| 終点値 $A_{end}$ | 最終ステップの $A_{total}$ | 副指標: 到達状態の確認 |
| AUC | 全ステップの $A_{total}$ の曲線下面積（台形近似） | 副指標: 一時的上昇と持続的上昇の判別 |

### 9.2 検定手法

| 項目 | 値 |
|------|-----|
| seed数 | 100（各実験条件） |
| seed管理 | 固定（0-99）で再現性を保証。同一seedを全条件で使用（対応あり設計） |
| 主指標の比較検定 | Wilcoxon符号付順位検定（同一seedペアでの $\bar{A}_{stable}$ の対応あり比較。正規性を仮定しない） |
| 分布全体の比較 | KS検定（$\bar{A}_{stable}$ の分布形状が条件間で異なるかを補助的に検定） |
| 効果量 | matched-pairs rank-biserial correlation $r$（Wilcoxon検定に対応するノンパラメトリック効果量） |
| 多重比較補正 | Holm-Bonferroni法（実験B: 3群比較で3ペア、実験C: 4段階で4ペア。族あたりの有意水準 $\alpha_{family} = 0.05$） |
| 報告 | 補正後p値 + 95%信頼区間（ブートストラップ法） |

### 9.3 設計根拠

- 同一seed（0-99）を全条件で使用するため、各seedの結果はペアとなる。独立2群のMann-Whitney Uではなく**対応あり検定（Wilcoxon符号付順位検定）**を使用し、seed間のばらつきを制御する
- 実験Bは3条件（B-1/2/3 vs A）、実験Cは4段階（C-1 vs B, C-2 vs C-1, ...）で複数の検定を行うため、**Holm-Bonferroni法**で多重比較を補正する（Bonferroniより検出力が高く、かつFWERを制御）
- KS検定は分布形状の差異を補助的に検出する（平均差がなくても分散や歪度が異なる場合を捕捉）
- 効果量は検定手法と整合したmatched-pairs rank-biserial correlationを使用する

### 9.4 分子サイズ条件付き分析（交絡制御）

触媒は結合確率を高めるため、分子サイズ（葉ノード数）が機械的に増大し、それに伴いMAも自明に上昇する。この**サイズ交絡**を制御しないと、「触媒により組織化された複雑さが創発した」と「触媒により分子が大きくなっただけ」を区別できない。以下を全条件間比較において必須とする：

- **サイズ別MA分布**: 分子を葉ノード数でビン分割（例: 4-7, 8-11, 12-15, 16+）し、各ビン内でのMA分布を条件間で比較する。同一サイズにおけるMA分布の変化が、触媒の「質的」効果を示す証拠となる
- **正規化アセンブリ指数**: $\hat{A}_i = A_i \, / \, A_{max}(n_i)$ を副指標として報告する。$A_{max}(n_i)$ は葉ノード数 $n_i$ における理論的MA上限（§5.4 で算出済み）。これにより、分子サイズの影響を除去した「再利用効率」を定量化する
- **分子サイズ分布の報告**: 各実験条件でのサイズ分布（平均・中央値・95パーセンタイル）を $A_{total}$ と併せて報告する。$A_{total}$ の条件間差が主にサイズ分布の差で説明される場合、その旨を明記する

---

## 10. 実験設計

### 実験A: 帰無仮説検証（ベースライン）

- **条件**: ランダムなBonding/Breaking。触媒なし。Open System（原子数上限なし）。初期原子数~1,000。
- **目的**: ランダム条件でのMA分布上限を確立し、独自閾値を校正する。
- **出力**: $A_{total}$時系列、MA分布、MA-CN散布図、転移判定パラメータの校正値

### 実験B: 自己触媒の効果

- **条件**: 実験Aと同じOpen System + 触媒メカニズムを追加
- **サブ条件**:
  - B-1: 構造決定論的触媒（文字列部分一致）
  - B-2: 構造決定論的触媒（木構造部分一致）
  - B-3: ランダムテーブル触媒
- **目的**: 触媒導入によるMA分布・$A_{total}$の変化を定量化。触媒記述方式による差異を分析。

### 実験C: 非限定的進化（アブレーション設計）

4因子を以下の順で1つずつ追加する。ベースは**実験Bの最良条件（Open System + 触媒）**。

#### 最良条件の選定規則

実験Bの3条件（B-1/2/3）から実験Cのベースとする条件を、以下の事前固定ルールで選定する：

1. $\bar{A}_{stable}$ の中央値が最も高い条件を候補とする
2. 候補が実験Aに対してWilcoxon検定で有意（補正後 $p < 0.05$）であること
3. 有意な条件が複数ある場合は、効果量 $r$ が最大の条件を選定する
4. いずれの条件も有意でない場合は、B-1（文字列部分一致）をデフォルトとする

#### サブ実験

| サブ実験 | 追加因子 | ベースとの差分 |
|---------|---------|--------------|
| C-1 | 資源競合 | Open Systemから**総原子数保存系**（$M_{total} = 1{,}000$）へ切替。結合・分解は系内再配分のみで、外部流入/流出は行わない。 |
| C-2 | 触媒耐性 | C-1 + 触媒マッチする分子の $P_{break}$ を $\gamma$ 倍に低減（$\gamma < 1$） |
| C-3 | 突然変異 | C-2 + 各ステップで確率 $\mu$ で葉ノードの文字がランダムに変化 |
| C-4 | エネルギー効率 | C-3 + 分子の内部ノード数に比例した維持コスト。毎ステップ確率的に自然分解。 |

各サブ実験で100 seed × 100Kステップ。前段の結果と比較。

> **Note:** 実験A・Bは**Open System**（原子数上限なし、原子は結合・分解で保存されるが系の総量に上限を設けない）で実行する。C-1で初めて**総原子数保存制約**を導入することで、「資源制約の有無」が明確な介入変数となる。

---

## 11. プロジェクト構成（モノレポ）

リポジトリ構成の詳細は `STRUCTURE.md` を正本とする。`spec.md` では構成の責務のみ定義する。

- 実装コード: `src/glyph_soup/`
- 実験エントリと分析: `src/glyph_soup/experiments/`
- テストと回帰フィクスチャ: `tests/` と `tests/golden_traces/`
- 研究・レビュー・参照資料: `docs/`
- プロジェクト運用ドキュメント: `README.md`, `AGENTS.md`, `PRODUCT.md`, `TECH.md`, `STRUCTURE.md`

---

## 12. 物理モデル整合ポリシー

本研究の統計検定・仮説検証は、**Python実装のwell-mixedモデルのみを一次結果**とする。

- ゲームエンジン実装は**二次用途**（可視化・操作的探索）とし、2D/3D物理モードの結果をPython結果と直接統計比較しない
- 直接比較を行う場合は、ゲームエンジン側に「**well-mixed等価モード**（空間座標・衝突判定を無効化し、同一反応規則を適用）」を実装し、そのモード同士のみ比較する
- 2D/3D物理モードは「空間効果の追加実験」として別系列で報告する

---

## 13. RQ3（AI探索）の扱い **[DEFERRED]**

`docs/research/research_plan.md` のRQ3「AIは高MA物質を生成する化学反応ルールを発見できるか」は、実験A・B・Cの完了後に設計する。

- 現スコープ（Phase 1-5）はRQ1・RQ2の検証に集中する
- RQ3の実験設計はPhase 5の結果を踏まえて別途仕様化する
- 想定アプローチ: 強化学習エージェントが反応パラメータ（$P_{bond}$, $P_{break}$, 触媒ルール）を調整し、$A_{total}$ を報酬として最適化する

---

## 14. 再現性の担保

### 14.1 乱数管理

| 項目 | 仕様 |
|------|------|
| RNGアルゴリズム | Python標準の `random` モジュール（Mersenne Twister） |
| seed設定 | 各実験ランの冒頭で `random.seed(seed_id)` を呼ぶ。seed_id = 0-99 |
| サブ処理の乱数分離 | 反応選択・切断位置選択・触媒サンプリングは単一のRNGインスタンスから順次取得（分離しない）。呼び出し順序を固定することで決定論的再現を保証する |

### 14.2 MA近似の決定論性

- 貪欲法のタイブレーク規則: 同サイズの再利用可能サブ構造が複数ある場合、**辞書順で最小のフラット表現**を選択する
- キャッシュキー: 対称モードでは正規形、非対称モードではそのままの木構造のハッシュ値

### 14.3 パラメータ記録

- 各実験ランの全パラメータを JSON ファイルとして `outputs/exp_a/params/seed_{id}.json` に保存する
- パラメータには $P_{bond}$, $P_{break}$ 関数種別と係数, 触媒方式, 対称性モード, seed_id を含む

### 14.4 実行環境

- Pythonバージョンと依存パッケージは `uv.lock` で固定する
- 実験実行コマンドを `README.md` と `AGENTS.md` に記録し、`uv` ベースの実行手順を維持する
- CPU並列実行する場合は、各seedを独立プロセスとし、プロセス間で乱数状態を共有しない

### 14.5 ゴールデントレース回帰テスト

単一RNGインスタンスによる決定論的再現（§14.1）は、コードのリファクタリングで `random.*` の呼び出し順序が変わると**静かに破壊される**。これを自動検出するため、以下の回帰テストをCIに組み込む：

- **基準seed**: seed = 0 で実験Aの条件（触媒なし）を実行する
- **記録ポイント**: ステップ 100, 1,000, 10,000 時点のシミュレーション状態（タンク内全分子のソート済みリスト、$A_{total}$、分子数）をスナップショットとして記録する
- **アサーション**: 記録済みスナップショットとの**厳密一致**をテストする（浮動小数点比較には `math.isclose` ではなく完全一致を使用。$A_{total}$ は整数演算で算出されるため）
- **保存先**: `tests/golden_traces/seed_0_exp_a.json` に期待値を格納する
- **更新手順**: RNG呼び出し順序を意図的に変更した場合のみ、ゴールデントレースを再生成する。再生成時はコミットメッセージに理由を明記する

---

## 15. 開発フェーズ

### Phase 1: コア実装 + ベンチマーク + Go/No-Goゲート
- 二分木データ構造（`molecule.py`）
- MA計算アルゴリズム（`assembly.py`）+ ベンチマーク（§5.3: トポロジー別誤差・順位保存性を含む）
- 対称性の両モード実装
- **MA理論的上限の評価（§5.4）**: 葉ノード数 ≤ 16 の網羅的MA計算 → Go/No-Go判定
- $A_{total}$ インクリメンタル計算の実装（§5.5）
- ゴールデントレース回帰テストの基盤構築（§14.5）

### Phase 2: シミュレーションエンジン
- Reactor, Chemist, Observer の実装
- パラメータ管理（`config.py`）
- CSV出力

### Phase 3: 実験A + 閾値校正
- 100 seed × 100Kステップのバッチ実行
- 分析Notebook作成
- Glyph Soup固有の閾値確立

### Phase 4: 実験B（触媒）
- 触媒メカニズム3方式の実装
- 比較分析

### Phase 5: 実験C（アブレーション）
- 4因子の段階的追加（資源競合→触媒耐性→突然変異→エネルギー効率）
- 各段階での比較分析

### Phase 6: ゲームエンジン視覚化 [DEFERRED]
- エンジン選定（連携の容易さで判断）
- Python ↔ エンジン間通信の実装
- リアルタイム可視化

### Phase 7: Rust最適化 [DEFERRED]
- Phase 3以降でボトルネックが判明した場合に実行
- MA計算 or Reactor のホットパスをRustで再実装
